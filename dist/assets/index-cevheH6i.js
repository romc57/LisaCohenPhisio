(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();(function(){const l="LisaCohenPhisio",e=location.hostname,t=location.pathname.split("/").filter(Boolean),s=e.endsWith(".github.io"),i=s&&t[0]===l;if(window.__BASE_PATH__=i?"/"+l:"",s&&!i){const n=t[0]||"";if(["","index.html","about.html","services.html","products.html","articles.html"].includes(n)){const r=t.slice(1).join("/"),o="/"+l+"/"+(n||"")+(r?"/"+r:""),c=location.hash||"";location.replace(o+c);return}}window.buildURL=function(n){return n=String(n||"").replace(/^\/+/,""),(window.__BASE_PATH__?window.__BASE_PATH__+"/":"/")+n},window.addEventListener("DOMContentLoaded",()=>{const n=location.pathname.split("/").pop();document.querySelectorAll(".site-nav a, .site-footer a").forEach(r=>{const o=r.getAttribute("href");if(!o)return;const c=o.split("#")[0];(c===n||n===""&&c==="index.html")&&r.classList.add("active")})})})();(function(){let l=!1;function e(){return document.getElementById("leaflet-map")}function t(){if(l)return;const i=e();if(!i||typeof L>"u")return;const n=parseFloat(i.dataset.lat||"31.773194"),a=parseFloat(i.dataset.lon||"35.298222"),r=parseInt(i.dataset.zoom||"16",10),o=L.map(i,{scrollWheelZoom:!1,attributionControl:!0}).setView([n,a],r);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap contributors"}).addTo(o),L.marker([n,a]).addTo(o).bindPopup("Kikar Yahalom 29<br>Ma'ale Adumim").openPopup(),l=!0}function s(){if(l||(t(),l))return;const i=new MutationObserver(()=>{!l&&e()&&typeof L<"u"&&(t(),l&&i.disconnect())});i.observe(document.documentElement||document.body,{childList:!0,subtree:!0}),setTimeout(()=>{l||t()},1e3)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s(),window.addEventListener("load",s)})();class A{constructor(){this.storageKey="accessibility-settings-v1",this.defaultSettings={fontScale:100,contrastHigh:!1,invertColors:!1,readableFont:!1,underlineLinks:!1,grayscale:!1,noAnimations:!1,direction:"ltr"},this.elements={},this.isInitialized=!1,this.currentSettings={...this.defaultSettings}}init(){this.isInitialized||(this.cacheElements(),this.loadSettings(),this.applySettings(),this.bindEvents(),this.isInitialized=!0,console.log("Accessibility Manager initialized"))}cacheElements(){this.elements={openButton:document.getElementById("accessibility-toggle"),panel:document.getElementById("a11y-panel"),closeButton:document.getElementById("a11y-close"),liveRegion:document.getElementById("a11y-live"),actionButtons:document.querySelectorAll("[data-a11y]"),circle:document.querySelector(".a11y-circle-container"),ring:document.querySelector(".a11y-circular-items")};const e=["openButton","panel","closeButton"];for(const t of e)this.elements[t]||console.warn(`Required accessibility element not found: ${t}`);this.elements.ring&&this.elements.ring.classList.add("js-radial")}loadSettings(){try{const e=localStorage.getItem(this.storageKey);e&&(this.currentSettings={...this.defaultSettings,...JSON.parse(e)})}catch(e){console.warn("Could not load accessibility settings:",e),this.currentSettings={...this.defaultSettings}}}saveSettings(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.currentSettings))}catch(e){console.warn("Could not save accessibility settings:",e)}}applySettings(){const{documentElement:e,body:t}=document;e.style.setProperty("--base-font-size",`${this.currentSettings.fontScale}%`);const s={"contrast-high":this.currentSettings.contrastHigh,"invert-colors":this.currentSettings.invertColors,"font-readable":this.currentSettings.readableFont,"underline-links":this.currentSettings.underlineLinks,"grayscale-images":this.currentSettings.grayscale,"no-animations":this.currentSettings.noAnimations};Object.entries(s).forEach(([i,n])=>t.classList.toggle(i,n)),e.setAttribute("dir",this.currentSettings.direction)}bindEvents(){this.elements.openButton?.addEventListener("click",e=>{e.stopPropagation(),this.togglePanel()}),this.elements.closeButton?.addEventListener("click",e=>{e.stopPropagation(),this.closePanel()}),this.elements.panel?.addEventListener("click",e=>{e.target===this.elements.panel&&this.closePanel()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.isPanelOpen()&&(this.closePanel(),this.elements.openButton?.focus())}),this.elements.panel?.addEventListener("click",e=>{const t=e.target.closest("[data-a11y]");t&&(e.preventDefault(),e.stopPropagation(),this.handleAction(t.getAttribute("data-a11y")))}),window.addEventListener("resize",()=>this.layoutRadialButtons()),window.addEventListener("orientationchange",()=>this.layoutRadialButtons())}isPanelOpen(){return this.elements.panel&&!this.elements.panel.hasAttribute("hidden")&&this.elements.panel.getAttribute("aria-hidden")==="false"}togglePanel(){this.isPanelOpen()?this.closePanel():this.openPanel()}openPanel(){this.elements.panel&&(this.elements.panel.removeAttribute("hidden"),this.elements.panel.setAttribute("aria-hidden","false"),this.elements.openButton?.setAttribute("aria-expanded","true"),this.layoutRadialButtons(),this.announce("Accessibility panel opened"))}closePanel(){this.elements.panel&&(this.elements.panel.setAttribute("hidden",""),this.elements.panel.setAttribute("aria-hidden","true"),this.elements.openButton?.setAttribute("aria-expanded","false"),this.announce("Accessibility panel closed"))}handleAction(e){const t={increaseFont:()=>{this.currentSettings.fontScale=Math.min(200,this.currentSettings.fontScale+10)},decreaseFont:()=>{this.currentSettings.fontScale=Math.max(70,this.currentSettings.fontScale-10)},toggleContrast:()=>{this.currentSettings.contrastHigh=!this.currentSettings.contrastHigh},toggleInvertColors:()=>{this.currentSettings.invertColors=!this.currentSettings.invertColors},toggleReadableFont:()=>{this.currentSettings.readableFont=!this.currentSettings.readableFont},toggleUnderlineLinks:()=>{this.currentSettings.underlineLinks=!this.currentSettings.underlineLinks},toggleGrayscale:()=>{this.currentSettings.grayscale=!this.currentSettings.grayscale},toggleAnimations:()=>{this.currentSettings.noAnimations=!this.currentSettings.noAnimations},toggleRTL:()=>{this.currentSettings.direction=this.currentSettings.direction==="rtl"?"ltr":"rtl"},reset:()=>{this.currentSettings={...this.defaultSettings}}};t[e]?(t[e](),this.applySettings(),this.saveSettings(),this.announce("Accessibility settings updated")):console.warn(`Unknown accessibility action: ${e}`)}announce(e){this.elements.liveRegion&&(this.elements.liveRegion.textContent="",setTimeout(()=>{this.elements.liveRegion.textContent=e},100))}getSettings(){return{...this.currentSettings}}updateSetting(e,t){e in this.currentSettings&&(this.currentSettings[e]=t,this.applySettings(),this.saveSettings())}layoutRadialButtons(){const e=this.elements.ring,t=this.elements.circle;if(!e||!t)return;const s=Array.from(e.querySelectorAll(".a11y-circular-btn"));if(!s.length)return;const i=t.getBoundingClientRect(),n=i.width,a=i.height;if(!n||!a)return;const r=getComputedStyle(s[0]),o=parseFloat(r.width)||60,d=Math.max(0,Math.min(n,a)/2-o/2-12),h=n/2,m=a/2,u=s.length;s.forEach((g,p)=>{const y=(-90+360/u*p)*Math.PI/180,b=h+d*Math.cos(y),E=m+d*Math.sin(y),S=b/n*100,w=E/a*100;g.style.left=S+"%",g.style.top=w+"%",g.style.right="auto",g.style.bottom="auto",g.style.transform="translate(-50%, -50%)"})}}class M{constructor(){this.elements={},this.isInitialized=!1}init(){this.isInitialized||(this.cacheElements(),this.bindEvents(),this.setHeaderHeight(),this.handleScroll(),window.addEventListener("resize",()=>this.setHeaderHeight()),window.addEventListener("scroll",()=>this.handleScroll(),{passive:!0}),this.isInitialized=!0,console.log("Navigation Manager initialized"))}cacheElements(){this.elements={toggle:document.getElementById("nav-toggle"),list:document.getElementById("nav-list"),header:document.querySelector(".site-header"),nav:document.querySelector(".site-nav")}}setHeaderHeight(){if(!this.elements.header)return;const e=this.elements.header.getBoundingClientRect().height;document.documentElement.style.setProperty("--header-height",e+"px"),document.body.classList.add("has-fixed-header")}handleScroll(){if(!this.elements.header)return;const e=window.scrollY>8;this.elements.header.classList.toggle("is-scrolled",e)}bindEvents(){!this.elements.toggle||!this.elements.list||(this.elements.toggle.addEventListener("click",()=>{this.toggleMenu()}),document.addEventListener("click",e=>{!this.elements.toggle.contains(e.target)&&!this.elements.list.contains(e.target)&&this.closeMenu()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.isMenuOpen()&&(this.closeMenu(),this.elements.toggle.focus())}),this.highlightActive(),window.addEventListener("hashchange",()=>this.highlightActive()))}highlightActive(){const e=this.elements.list?.querySelectorAll("a");if(!e)return;const s=window.location.pathname.split("/").pop()||"index.html";e.forEach(i=>{const n=i.getAttribute("href");if(!n)return;const a=n.split("#")[0]||"index.html",r=s===""||s==="index.html",o=a===""||a==="index.html";let c=!1;(r&&o||s===a)&&(c=!0),i.classList.toggle("active",c)})}isMenuOpen(){return this.elements.list?.classList.contains("open")}toggleMenu(){const e=this.elements.list.classList.toggle("open");this.elements.nav?.classList.toggle("is-open",e),this.elements.toggle.setAttribute("aria-expanded",String(e))}closeMenu(){this.elements.list?.classList.remove("open"),this.elements.nav?.classList.remove("is-open"),this.elements.toggle?.setAttribute("aria-expanded","false")}openMenu(){this.elements.list?.classList.add("open"),this.elements.nav?.classList.add("is-open"),this.elements.toggle?.setAttribute("aria-expanded","true")}}const I="modulepreload",C=function(l){return"/"+l},v={},P=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var a=c;document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),o=r?.nonce||r?.getAttribute("nonce");i=c(t.map(d=>{if(d=C(d),d in v)return;v[d]=!0;const h=d.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":I,h||(u.as="script"),u.crossOrigin="",u.href=d,o&&u.setAttribute("nonce",o),document.head.appendChild(u),h)return new Promise((g,p)=>{u.addEventListener("load",g),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function n(r){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r}return i.then(r=>{for(const o of r||[])o.status==="rejected"&&n(o.reason);return e().catch(n)})};class x{constructor(){this.elements={},this.isInitialized=!1,this._expandersSetupDone=!1}init(){this.isInitialized||(this.cacheElements(),this.setupExpandersToggle(),this.renderContent(),this.updateYear(),this.isInitialized=!0,console.log("Content Manager initialized"))}cacheElements(){this.elements={servicesGrid:document.getElementById("services-grid"),servicesList:document.getElementById("services-list"),servicesAllList:document.getElementById("services-all-list"),productsGrid:document.getElementById("products-grid"),productsList:document.getElementById("products-list"),productsAllList:document.getElementById("products-all-list"),articlesList:document.getElementById("articles-list"),articlesAllList:document.getElementById("articles-all-list"),articlesGrid:document.getElementById("articles-grid"),yearElement:document.getElementById("year")}}renderContent(){P(async()=>{const{services:e,products:t,articles:s}=await import("./data-T5GhSr0f.js");return{services:e,products:t,articles:s}},[]).then(({services:e,products:t,articles:s})=>{this.renderServices(e),this.renderServicesTeaser(e),this.renderAllServiceLinks(e),this.renderProductsGrid(t),this.renderProductsTeaser(t),this.renderAllProductLinks(t),this.renderArticlesGrid(s),this.renderArticlesTeaser(s),this.renderAllArticleLinks(s),this.scrollToHashIfNeeded()}).catch(e=>{console.error("Could not load content data:",e)})}renderServices(e){if(!this.elements.servicesGrid||!e)return;const t=parseInt(this.elements.servicesGrid.dataset.limit||e.length,10);e.slice(0,t).forEach(s=>{const i=this.createServiceCard(s);this.elements.servicesGrid.appendChild(i)})}renderServicesTeaser(e){const t=this.elements.servicesList;!t||!e||(t.innerHTML="",t.className="horizontal-scroll reveal-on-scroll stagger-1",e.slice(0,8).forEach(s=>{const i=document.createElement("div"),n=this.createServiceCard(s);i.appendChild(n),t.appendChild(i)}))}renderAllServiceLinks(e){const t=this.elements.servicesAllList;!t||!e||(t.innerHTML="",e.forEach(s=>{const i=document.createElement("li"),n=this.slugify(s.title),a=typeof window<"u"&&typeof window.buildURL=="function"?window.buildURL(`services.html#service-${n}`):`services.html#service-${n}`,r=document.createElement("a");r.href=a,r.textContent=s.title,r.className="service-link",r.setAttribute("aria-label",`Jump to ${s.title} on services page`),i.appendChild(r),t.appendChild(i)}))}renderProductsGrid(e){if(!this.elements.productsGrid||!e)return;const t=this.elements.productsGrid.dataset.limit,s=t?parseInt(t,10):e.length;this.elements.productsGrid.innerHTML="",e.slice(0,s).forEach(i=>{const n=this.createProductCard(i);this.elements.productsGrid.appendChild(n)})}renderProductsTeaser(e){const t=this.elements.productsList;!t||!e||(t.innerHTML="",t.className="horizontal-scroll reveal-on-scroll stagger-2",e.slice(0,3).forEach(s=>{const i=document.createElement("div"),n=this.createProductCard(s);i.appendChild(n),t.appendChild(i)}))}renderAllProductLinks(e){const t=this.elements.productsAllList;!t||!e||(t.innerHTML="",e.forEach(s=>{const i=document.createElement("li"),n=this.slugify(s.title),a=typeof window<"u"&&typeof window.buildURL=="function"?window.buildURL(`products.html#product-${n}`):`products.html#product-${n}`,r=document.createElement("a");r.href=a,r.textContent=s.title,r.className="service-link",r.setAttribute("aria-label",`Jump to ${s.title} on orthopedic insoles page`),i.appendChild(r),t.appendChild(i)}))}renderArticlesGrid(e){const t=this.elements.articlesGrid;!t||!e||(t.innerHTML="",e.forEach(s=>{const i=(s.slug||String(s.title)).toLowerCase().replace(/[^\w\s-]/g,"").trim().replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),n=document.createElement("section");n.className="service-section",n.id=`article-${i}`;const a=document.createElement("article");a.className="card",a.innerHTML=`
        <span class="tag">Article</span>
        <h3>${this.escapeHtml(s.title)}</h3>
        <div class="prose">${s.contentHtml||""}</div>
      `,n.appendChild(a),t.appendChild(n)}))}renderArticlesTeaser(e){const t=this.elements.articlesList;!t||!e||(t.innerHTML="",t.className="horizontal-scroll reveal-on-scroll stagger-3",e.slice(0,3).forEach(s=>{const i=document.createElement("div"),n=document.createElement("article");n.className="card";const a=new Date(s.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});n.innerHTML=`
        <span class="tag">Article</span>
        <h3>${this.escapeHtml(s.title)}</h3>
        <p>${this.escapeHtml(s.desc)}</p>
        <div style="margin-top: auto; display:flex; justify-content:space-between; align-items:center">
           <time style="font-size:0.85rem; color:var(--muted)">${a}</time>
           <a class="btn btn-outline" href="articles.html#article-${this.slugify(s.title)}" aria-label="Read ${this.escapeHtml(s.title)}">
             Read More
           </a>
        </div>
      `,i.appendChild(n),t.appendChild(i)}))}renderAllArticleLinks(e){const t=this.elements.articlesAllList;!t||!e||(t.innerHTML="",e.forEach(s=>{const i=document.createElement("li"),n=this.slugify(s.slug||s.title),a=typeof window<"u"&&typeof window.buildURL=="function"?window.buildURL(`articles.html#article-${n}`):`articles.html#article-${n}`,r=document.createElement("a");r.href=a,r.textContent=s.title,r.className="service-link",r.setAttribute("aria-label",`Jump to ${s.title} on articles page`),i.appendChild(r),t.appendChild(i)}))}createServiceCard(e){const t=document.createElement("article");t.className="card",e.category&&(t.dataset.category=e.category);const s=this.slugify(e.title),i=document.createElement("section");i.className="service-section",i.id=`service-${s}`;const n=this.elements?.servicesGrid,a=!(n&&n.dataset&&n.dataset.showTags==="false"),r=this.escapeHtml(e.category||e.tag||"Service");return t.innerHTML=`
      ${a?`<span class="tag">${r}</span>`:""}
      <h3>${this.escapeHtml(e.title)}</h3>
      <p>${this.escapeHtml(e.desc)}</p>
      <div style="margin-top: auto">
        <a class="btn btn-outline" href="#contact" aria-label="Contact about ${this.escapeHtml(e.title)}">
          Inquire
        </a>
      </div>
    `,i.appendChild(t),i}createProductCard(e){const t=document.createElement("article");t.className="card";const s=this.slugify(e.title),i=document.createElement("section");i.className="service-section",i.id=`product-${s}`;const n=Array.isArray(e.images)?e.images:e.image?[e.image]:[],a=Array.isArray(e.imagesAlt)?e.imagesAlt:e.imageAlt?[e.imageAlt]:[],r=n.length>0,o=r?`
      <div class="product-media-grid" role="group" aria-label="${this.escapeHtml(e.title)} images">
        ${n.map((c,d)=>`
          <figure class="product-media">
            <img src="${this.escapeHtml(c)}" alt="${this.escapeHtml(a[d]||e.title)}" />
          </figure>
        `).join("")}
      </div>
    `:"";return t.innerHTML=`
      <span class="tag">Orthopedic Insoles</span>
      <h3>${this.escapeHtml(e.title)}</h3>
      <div class="product-card ${r?"media-right":""}">
        <div class="product-text">
          <p>${this.escapeHtml(e.desc)}</p>
        </div>
        ${o}
      </div>
      <div style="margin-top: auto">
        ${e.price?`<span class="price">${this.escapeHtml(e.price)}</span>`:""}
        <a class="btn btn-outline" href="#contact" aria-label="Inquire about ${this.escapeHtml(e.title)}">
          Inquire
        </a>
      </div>
    `,i.appendChild(t),i}createArticleItem(e){const t=document.createElement("article");t.className="article-item";const s=new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),i=`article-${this.generateId()}`;return t.innerHTML=`
      <h3>
        <a href="${this.escapeHtml(e.href)}" aria-describedby="${i}">
          ${this.escapeHtml(e.title)}
        </a>
      </h3>
      <p id="${i}">${this.escapeHtml(e.desc)}</p>
      <time datetime="${e.date}">${s}</time>
    `,t}updateYear(){this.elements.yearElement&&(this.elements.yearElement.textContent=new Date().getFullYear())}scrollToHashIfNeeded(){if(!location.hash)return;const e=location.hash.slice(1),t=document.getElementById(e);t&&requestAnimationFrame(()=>{t.scrollIntoView({behavior:"instant",block:"start"});const s=t.querySelector("h3, h2, h1, [tabindex]");s&&typeof s.focus=="function"&&(s.setAttribute("tabindex","-1"),s.focus({preventScroll:!0}))})}setupExpandersToggle(){if(this._expandersSetupDone)return;const e=(t,s,i,n)=>{const a=document.getElementById(t);if(!a)return;const r=a.querySelector(s),o=a.querySelector(`#${i}`),c=a.querySelector(n);if(!r||!o)return;const d=()=>{const h=r.open===!0;o.hidden=!!h,c&&(h?c.style.display="none":c.style.removeProperty("display"))};d(),r.addEventListener("toggle",d)};e("services",".services-expand","services-list",".open-all-collapsed"),e("products",".products-expand","products-list",".open-all-products-collapsed"),e("articles",".articles-expand","articles-list",".open-all-articles-collapsed"),this._expandersSetupDone=!0}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}generateId(){return Math.random().toString(36).substr(2,9)}slugify(e){return String(e).normalize("NFKD").replace(/[^\w\s-]/g,"").trim().toLowerCase().replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}}class ${constructor(){this.elements={},this.isInitialized=!1,this.modal=null}init(){this.isInitialized||(this.cacheElements(),this.bindEvents(),this.createSuccessModal(),this.isInitialized=!0,console.log("Form Manager initialized"))}cacheElements(){this.elements={form:document.getElementById("contact-form"),status:document.getElementById("form-status")}}createSuccessModal(){document.body.insertAdjacentHTML("beforeend",`
      <div class="modal-overlay" id="success-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content">
          <div class="modal-icon" aria-hidden="true">âœ“</div>
          <h2 id="modal-title">Thank You!</h2>
          <p>Your message has been sent successfully. We'll get back to you within 1 business day.</p>
          <button class="btn btn-primary" id="modal-close-btn">Close</button>
          <div class="modal-links">
            In the meantime, explore our <a href="articles.html">articles</a> or <a href="services.html">services</a>.
          </div>
        </div>
      </div>
    `),this.modal=document.getElementById("success-modal"),document.getElementById("modal-close-btn")?.addEventListener("click",()=>this.hideModal()),this.modal?.addEventListener("click",s=>{s.target===this.modal&&this.hideModal()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&this.modal?.classList.contains("is-visible")&&this.hideModal()})}showModal(){this.modal&&(this.modal.classList.add("is-visible"),document.body.style.overflow="hidden",setTimeout(()=>{document.getElementById("modal-close-btn")?.focus()},100))}hideModal(){this.modal&&(this.modal.classList.remove("is-visible"),document.body.style.overflow="")}bindEvents(){this.elements.form&&this.elements.form.addEventListener("submit",e=>{e.preventDefault(),this.handleSubmit(e)})}handleSubmit(e){const t=new FormData(this.elements.form),s=Object.fromEntries(t.entries()),n=["name","email","message"].filter(a=>!s[a]?.trim());if(n.length>0){this.showStatus("Please complete all required fields.","error"),this.focusFirstMissingField(n);return}if(!this.isValidEmail(s.email)){this.showStatus("Please enter a valid email address.","error"),this.elements.form.querySelector('[name="email"]')?.focus();return}this.submitForm(s)}async submitForm(e){this.showStatus("Sending message...","loading");try{await this.simulateSubmission(),this.elements.form.reset(),this.elements.status?.classList.add("sr-only"),this.showModal()}catch(t){console.error("Form submission error:",t),this.showStatus("Sorry, there was an error sending your message. Please try again.","error")}}simulateSubmission(){return new Promise(e=>{setTimeout(e,1e3)})}showStatus(e,t="info"){this.elements.status&&(this.elements.status.textContent=e,this.elements.status.className=`form-status ${t}`,this.elements.status.classList.remove("sr-only"),t!=="loading"&&setTimeout(()=>{this.elements.status.classList.add("sr-only")},5e3))}focusFirstMissingField(e){const t=this.elements.form.querySelector(`[name="${e[0]}"]`);t&&(t.focus(),t.setAttribute("aria-invalid","true"))}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}}class H{constructor(e){this.root=document.querySelector(e),this.root&&(this.track=this.root.querySelector(".slideshow-track"),this.slides=Array.from(this.root.querySelectorAll(".slide")),this.prevBtn=this.root.querySelector("[data-slide-prev]"),this.nextBtn=this.root.querySelector("[data-slide-next]"),this.dotsContainer=this.root.querySelector(".slide-dots"),this.index=0,this.interval=null,this.autoDelay=4e3,this.isAutoPlaying=!1,this.visibilityObserver=null)}init(){!this.root||!this.track||!this.slides.length||(this.root.setAttribute("role","region"),this.root.setAttribute("aria-roledescription","carousel"),this.root.setAttribute("aria-label",this.root.getAttribute("aria-label")||"Image slideshow"),this.root.hasAttribute("tabindex")||this.root.setAttribute("tabindex","0"),this.setupLayout(),this.buildDots(),this.bind(),this.update(),this.startAutoplay())}setupLayout(){const e=this.slides.length;this.track&&(this.track.style.width=`${e*100}%`);const t=100/e+"%";this.slides.forEach((s,i)=>{s.style.flex=`0 0 ${t}`,s.setAttribute("aria-roledescription","slide"),s.setAttribute("aria-label",`${i+1} of ${e}`)}),this.root.dataset.slides=String(e)}buildDots(){this.dotsContainer&&(this.dotsContainer.innerHTML="",this.slides.forEach((e,t)=>{const s=document.createElement("button");s.type="button",s.setAttribute("aria-label",`Go to slide ${t+1}`),s.addEventListener("click",()=>this.goTo(t)),this.dotsContainer.appendChild(s)}))}bind(){this.prevBtn?.addEventListener("click",()=>this.prev()),this.nextBtn?.addEventListener("click",()=>this.next()),this.root.addEventListener("mouseenter",()=>{this.root.classList.add("show-nav"),this.stopAutoplay()}),this.root.addEventListener("mouseleave",()=>{this.root.classList.remove("show-nav"),this.startAutoplay()}),this.root.addEventListener("focusin",()=>this.stopAutoplay()),this.root.addEventListener("focusout",()=>this.startAutoplay()),this.root.addEventListener("keydown",e=>{e.key==="ArrowRight"&&(e.preventDefault(),this.next()),e.key==="ArrowLeft"&&(e.preventDefault(),this.prev()),e.key==="Home"&&(e.preventDefault(),this.goTo(0)),e.key==="End"&&(e.preventDefault(),this.goTo(this.slides.length-1))}),window.addEventListener("resize",()=>this.setupLayout()),document.addEventListener("visibilitychange",()=>{document.hidden?this.stopAutoplay():this.startAutoplay()}),"IntersectionObserver"in window&&(this.visibilityObserver=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting?this.startAutoplay():this.stopAutoplay()})},{threshold:.1}),this.visibilityObserver.observe(this.root))}goTo(e){this.index=Math.max(0,Math.min(e,this.slides.length-1)),this.update(),this.stopAutoplay(),setTimeout(()=>this.startAutoplay(),5e3)}prev(){this.goTo(this.index===0?this.slides.length-1:this.index-1)}next(){this.goTo(this.index===this.slides.length-1?0:this.index+1)}startAutoplay(){this.isAutoPlaying||this.slides.length<=1||document.body.classList.contains("no-animations")||(this.stopAutoplay(),this.isAutoPlaying=!0,this.interval=setInterval(()=>{this.isAutoPlaying&&!this.root.classList.contains("show-nav")&&this.next()},this.autoDelay))}stopAutoplay(){this.isAutoPlaying=!1,this.interval&&(clearInterval(this.interval),this.interval=null)}update(){if(!this.track)return;const e=-this.index*(100/this.slides.length);this.track.style.transform=`translateX(${e}%)`,this.slides.forEach((s,i)=>{s.classList.toggle("current",i===this.index),s.setAttribute("aria-hidden",i===this.index?"false":"true")}),this.dotsContainer&&this.dotsContainer.querySelectorAll("button").forEach((i,n)=>{i.setAttribute("aria-selected",n===this.index?"true":"false")});const t=this.slides.length<=1;this.prevBtn?.setAttribute("aria-disabled",t?"true":"false"),this.nextBtn?.setAttribute("aria-disabled",t?"true":"false")}}class k{constructor(){this.managers={},this.isInitialized=!1}async init(){if(this.isInitialized){console.warn("Site already initialized");return}try{await this.waitForDOM(),this.initializeManagers(),this.setupAnimations(),this.setupErrorHandling(),this.isInitialized=!0,console.log("ðŸš€ Site initialized successfully")}catch(e){console.error("âŒ Site initialization failed:",e)}}setupAnimations(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const t={root:null,rootMargin:"0px",threshold:.15},s=new IntersectionObserver((i,n)=>{i.forEach(a=>{a.isIntersecting&&(a.target.classList.add("is-visible"),n.unobserve(a.target))})},t);document.querySelectorAll(".reveal-on-scroll").forEach(i=>s.observe(i)),this.observer=s}waitForDOM(){return new Promise(e=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()})}initializeManagers(){this.managers={accessibility:new A,navigation:new M,content:new x,form:new $},Object.entries(this.managers).forEach(([e,t])=>{try{t.init(),console.log(`âœ… ${e} manager initialized`)}catch(s){console.error(`âŒ Failed to initialize ${e} manager:`,s)}}),new H("#showcase").init()}setupErrorHandling(){window.addEventListener("error",e=>{console.error("Global error:",e.error)}),window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason)})}getManager(e){return this.managers[e]||null}isReady(){return this.isInitialized}cleanup(){console.log("Site cleanup performed")}}const f=new k;f.init();window.addEventListener("beforeunload",()=>{f.cleanup()});window.SiteManager=f;
